{% extends 'layouts/default.html' %}

{% block head %}

{% load static %}
<link rel="stylesheet" href="{% static 'css/update-severities.css' %}">
<script src="{% static 'js/update-factor-severities.js' %}"></script>

{% endblock %}

{% block content %}

<div class="container update-severities-page" style="margin-top: 65px;">
    <div class="row">
        <a class="btn btn-primary ml-auto mr-2 my-2" href="/user/{{user_id}}" role="button">Back to Home</a>
    </div>

    <div class="row">
        <h2 class="col-12 text-center">Factor / Treatment Update</h2>

        <form class="uss-form w-100 needs-validation my-3" novalidate method="POST">
            {% csrf_token %}
                                    
            <input type="hidden" name="action" value="add"/>

            <div class="col-12">
                <div class="row justify-content-md-center">
                    <div class="col-12 col-lg-3">
                        <div class="form-group row mx-lg-0">
                            <label for="date" class="col-form-label label-1">Date</label>
                            <input id="date" name="date" class="form-control col" required />

                            <script>
                                var date = new Date();

                                $("#date").datepicker({ 
                                    autoclose: true, 
                                    maxDate: new Date(), 
                                    defaultDate: new Date(),
                                    changeMonth: true,
                                    changeYear: true 
                                });
                                $("#date").datepicker("setDate", date);
                            </script>
                        </div>
                    </div>

                    <div class="col-12 col-lg-3">
                        <div class="form-group row mx-lg-0">
                            <label for="time" class="col-form-label label-1">Time</label>
                            <input id="time" name="time" type="time" class="form-control col" value="{{current_time.h}}:{{current_time.m}}:{{current_time.s}}" required />
                        </div>
                    </div>
                </div>

                <div class="row justify-content-md-center">
                    <div class="col-12 col-lg-6">
                        <div class="form-group row mx-lg-0">
                            <label for="title" class="col-form-label label-1">Title</label>
                            <input id="title" name="title" class="form-control col" required />
                        </div>
                    </div>
                </div>
            </div>

            

            <table class="table table-borderless factor-list">
                <tfoot>
                    <tr>
                        <td class="align-middle" width="22%">
                            <select class="form-control factors">
                                <option value="-1">Please select factor</option>
                                {% for factor in factors %}
                                    <option value="{{factor.id}}" {% if factor.disabled %}disabled{% endif %}>{{factor.name}}</option>
                                {% endfor %}
                            </select>
                        </td>

                        <td class="align-middle" width="58%">
                            <div class="row mx-auto">
                                <button class="btn btn-primary mr-2">Add as an Intermittent Factor</button>
                                <button class="btn btn-primary mr-auto">Add as a Daily Factor</button>
                            </div>
                        </td>

                        <td width="20%"/>
                        <td width="10%"/>
                    </tr>

                    <tr>
                        <td colspan="4">
                            <div class="row mx-auto">
                                <button class="btn btn-primary mx-auto" type="submit">Submit</button>
                            </div>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </form>
    </div>
</div>

{% endblock %}